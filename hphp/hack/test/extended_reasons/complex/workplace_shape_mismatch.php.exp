error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `_PIRANHA_SANDBOX_QUEUED_` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `_PIRANHA_SANDBOX_QUEUED_` is defined

 14 |   ?'earlyreturn' => int,
 15 |   ?»'_PIRANHA_SANDBOX_QUEUED_'« => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,

File "workplace_shape_mismatch.php", line 15, character 4 - line 15, character 29:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `_PIRANHA_SANDBOX_QUEUED_` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => »bool«,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,

File "workplace_shape_mismatch.php", line 15, character 34 - line 15, character 37:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `async_bulkapi_factor` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `async_bulkapi_factor` is defined

 17 |   ?'execution_push_phase' => string,
 18 |   ?»'async_bulkapi_factor'« => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,

File "workplace_shape_mismatch.php", line 18, character 4 - line 18, character 25:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `async_bulkapi_factor` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => »float«,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,

File "workplace_shape_mismatch.php", line 18, character 30 - line 18, character 34:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `devserver` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `devserver` is defined

 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?»'devserver'« => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,

File "workplace_shape_mismatch.php", line 19, character 4 - line 19, character 14:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `devserver` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => »string«,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,

File "workplace_shape_mismatch.php", line 19, character 19 - line 19, character 24:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `earlyreturn` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `earlyreturn` is defined

 13 |   ?'retry_attempt' => int,
 14 |   ?»'earlyreturn'« => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,

File "workplace_shape_mismatch.php", line 14, character 4 - line 14, character 16:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `earlyreturn` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => »int«,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,

File "workplace_shape_mismatch.php", line 14, character 21 - line 14, character 23:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `execute_after` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `execute_after` is defined

 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?»'execute_after'« => int,
 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => int,

File "workplace_shape_mismatch.php", line 7, character 4 - line 7, character 18:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `execute_after` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => »int«,
 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => int,

File "workplace_shape_mismatch.php", line 7, character 23 - line 7, character 25:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `execute_before` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `execute_before` is defined

 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,
 8 |   ?»'execute_before'« => int,
 9 |   ?'expire_after' => int,
10 |   ?'region' => string,

File "workplace_shape_mismatch.php", line 8, character 4 - line 8, character 19:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => int,
10 |   ?'region' => string,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `execute_before` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => »int«,
 9 |   ?'expire_after' => int,
10 |   ?'region' => string,

File "workplace_shape_mismatch.php", line 8, character 24 - line 8, character 26:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `execution_push_phase` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `execution_push_phase` is defined

 16 |   ?'resource_requirement' => int,
 17 |   ?»'execution_push_phase'« => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,

File "workplace_shape_mismatch.php", line 17, character 4 - line 17, character 25:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `execution_push_phase` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => »string«,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,

File "workplace_shape_mismatch.php", line 17, character 30 - line 17, character 35:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `expire_after` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `expire_after` is defined

 8 |   ?'execute_before' => int,
 9 |   ?»'expire_after'« => int,
10 |   ?'region' => string,
11 |   ?'scheduling_uid' => int,

File "workplace_shape_mismatch.php", line 9, character 4 - line 9, character 17:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `expire_after` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => »int«,
10 |   ?'region' => string,
11 |   ?'scheduling_uid' => int,

File "workplace_shape_mismatch.php", line 9, character 22 - line 9, character 24:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `fifo_dedup_key` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `fifo_dedup_key` is defined

 20 |   ?'fifo_ordering_key' => string,
 21 |   ?»'fifo_dedup_key'« => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );

File "workplace_shape_mismatch.php", line 21, character 4 - line 21, character 19:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `fifo_dedup_key` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => »string«,
 22 |   ?'send_schedule_cats' => bool,
 23 | );

File "workplace_shape_mismatch.php", line 21, character 24 - line 21, character 29:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `fifo_ordering_key` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `fifo_ordering_key` is defined

 19 |   ?'devserver' => string,
 20 |   ?»'fifo_ordering_key'« => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,

File "workplace_shape_mismatch.php", line 20, character 4 - line 20, character 22:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `fifo_ordering_key` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => »string«,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,

File "workplace_shape_mismatch.php", line 20, character 27 - line 20, character 32:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `region` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `region` is defined

 9 |   ?'expire_after' => int,
10 |   ?»'region'« => string,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,

File "workplace_shape_mismatch.php", line 10, character 4 - line 10, character 11:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `region` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 9 |   ?'expire_after' => int,
10 |   ?'region' => »string«,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,

File "workplace_shape_mismatch.php", line 10, character 16 - line 10, character 21:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `resource_requirement` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `resource_requirement` is defined

 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?»'resource_requirement'« => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,

File "workplace_shape_mismatch.php", line 16, character 4 - line 16, character 25:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `resource_requirement` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => »int«,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,

File "workplace_shape_mismatch.php", line 16, character 30 - line 16, character 32:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `retry_attempt` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `retry_attempt` is defined

 12 |   ?'tag' => string,
 13 |   ?»'retry_attempt'« => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,

File "workplace_shape_mismatch.php", line 13, character 4 - line 13, character 18:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `retry_attempt` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => »int«,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,

File "workplace_shape_mismatch.php", line 13, character 23 - line 13, character 25:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `scheduling_uid` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `scheduling_uid` is defined

 10 |   ?'region' => string,
 11 |   ?»'scheduling_uid'« => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,

File "workplace_shape_mismatch.php", line 11, character 4 - line 11, character 19:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `scheduling_uid` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => »int«,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,

File "workplace_shape_mismatch.php", line 11, character 24 - line 11, character 26:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `send_schedule_cats` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `send_schedule_cats` is defined

 21 |   ?'fifo_dedup_key' => string,
 22 |   ?»'send_schedule_cats'« => bool,
 23 | );

File "workplace_shape_mismatch.php", line 22, character 4 - line 22, character 23:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `send_schedule_cats` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => »bool«,
 23 | );

File "workplace_shape_mismatch.php", line 22, character 28 - line 22, character 31:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `serialization_format` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `serialization_format` is defined

 3 | class SerializationFormat {}
 4 | 
 5 | type AsyncJobOptions = shape(
 6 |   ?»'serialization_format'« => SerializationFormat,
 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => int,

File "workplace_shape_mismatch.php", line 6, character 4 - line 6, character 25:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 3 | class SerializationFormat {}
 4 | 
 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `serialization_format` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 3 | class SerializationFormat {}
 4 | 
 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => »SerializationFormat«,
 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => int,

File "workplace_shape_mismatch.php", line 6, character 30 - line 6, character 48:

which is defined here

 3 | class »SerializationFormat« {}
 4 | 
 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => int,

File "workplace_shape_mismatch.php", line 3, character 7 - line 3, character 25:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

error: Typing[4057] Invalid argument

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The field `tag` is missing

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

The field `tag` is defined

 11 |   ?'scheduling_uid' => int,
 12 |   ?»'tag'« => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,

File "workplace_shape_mismatch.php", line 12, character 4 - line 12, character 8:

Step 1 of 4

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 88, character 32 - line 88, character 42:

The supertype comes from this expression

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 18 - line 97, character 44:

Step 2 of 4

These are function types so next I checked the 1st function parameter of the supertype and subtype were subtypes (functions are contravariant in their parameters so the direction of the subtype relationship is reversed).

The subtype comes from this hint

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

which is defined here

 5 | type »AsyncJobOptions« = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,

File "workplace_shape_mismatch.php", line 5, character 6 - line 5, character 20:

and flows into this expression as the parameter hint

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 21 - line 95, character 28:

which itself flows into this expression as the type of the local variable

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 97, character 36 - line 97, character 43:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 5 - line 89, character 24:

Step 3 of 4

The supertype is a nullable type so next I checked the non-null part was a supertype of the subtype.

The subtype is the same as before.

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

File "workplace_shape_mismatch.php", line 95, character 5 - line 95, character 19:

The supertype comes from this hint

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";

File "workplace_shape_mismatch.php", line 89, character 6 - line 89, character 24:

which is defined here

 74 | type »AsyncTierJobOptions« = shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,

File "workplace_shape_mismatch.php", line 74, character 6 - line 74, character 24:

Step 4 of 4

These are shape types so next I tried to check the type of `tag` fields are subtypes. The field is optional in the subtype but missing in the supertype.

This step is the cause of the error.

The subtype comes from this hint

 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => »string«,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,

File "workplace_shape_mismatch.php", line 12, character 13 - line 12, character 18:

The supertype didn't exist because the field was missing.


File "", line 0, character 0 - line 0, character -1:

17 errors found.
