error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field _PIRANHA_SANDBOX_QUEUED_ is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field _PIRANHA_SANDBOX_QUEUED_ is defined

File workplace_shape_mismatch.php, line 15, character 4 - line 15, character 29:

 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?»'_PIRANHA_SANDBOX_QUEUED_'« => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the _PIRANHA_SANDBOX_QUEUED_ field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 15, character 34 - line 15, character 37:

 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => »bool«,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field async_bulkapi_factor is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field async_bulkapi_factor is defined

File workplace_shape_mismatch.php, line 18, character 4 - line 18, character 25:

 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?»'async_bulkapi_factor'« => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the async_bulkapi_factor field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 18, character 30 - line 18, character 34:

 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => »float«,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field devserver is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field devserver is defined

File workplace_shape_mismatch.php, line 19, character 4 - line 19, character 14:

 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?»'devserver'« => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the devserver field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 19, character 19 - line 19, character 24:

 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => »string«,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field earlyreturn is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field earlyreturn is defined

File workplace_shape_mismatch.php, line 14, character 4 - line 14, character 16:

 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?»'earlyreturn'« => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the earlyreturn field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 14, character 21 - line 14, character 23:

 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => »int«,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field execute_after is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field execute_after is defined

File workplace_shape_mismatch.php, line 7, character 4 - line 7, character 18:

 3 | class SerializationFormat {}
 4 | 
 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?»'execute_after'« => int,
 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => int,
10 |   ?'region' => string,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,
13 |   ?'retry_attempt' => int,
14 |   ?'earlyreturn' => int,
15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
16 |   ?'resource_requirement' => int,
17 |   ?'execution_push_phase' => string,
18 |   ?'async_bulkapi_factor' => float,
19 |   ?'devserver' => string,
20 |   ?'fifo_ordering_key' => string,
21 |   ?'fifo_dedup_key' => string,
22 |   ?'send_schedule_cats' => bool,
23 | );
24 | 
25 | 
26 | enum AsyncTierJobOption: string as string {

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the execute_after field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 7, character 23 - line 7, character 25:

 3 | class SerializationFormat {}
 4 | 
 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => »int«,
 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => int,
10 |   ?'region' => string,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,
13 |   ?'retry_attempt' => int,
14 |   ?'earlyreturn' => int,
15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
16 |   ?'resource_requirement' => int,
17 |   ?'execution_push_phase' => string,
18 |   ?'async_bulkapi_factor' => float,
19 |   ?'devserver' => string,
20 |   ?'fifo_ordering_key' => string,
21 |   ?'fifo_dedup_key' => string,
22 |   ?'send_schedule_cats' => bool,
23 | );
24 | 
25 | 
26 | enum AsyncTierJobOption: string as string {

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field execute_before is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field execute_before is defined

File workplace_shape_mismatch.php, line 8, character 4 - line 8, character 19:

 3 | class SerializationFormat {}
 4 | 
 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,
 8 |   ?»'execute_before'« => int,
 9 |   ?'expire_after' => int,
10 |   ?'region' => string,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,
13 |   ?'retry_attempt' => int,
14 |   ?'earlyreturn' => int,
15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
16 |   ?'resource_requirement' => int,
17 |   ?'execution_push_phase' => string,
18 |   ?'async_bulkapi_factor' => float,
19 |   ?'devserver' => string,
20 |   ?'fifo_ordering_key' => string,
21 |   ?'fifo_dedup_key' => string,
22 |   ?'send_schedule_cats' => bool,
23 | );
24 | 
25 | 
26 | enum AsyncTierJobOption: string as string {

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the execute_before field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 8, character 24 - line 8, character 26:

 3 | class SerializationFormat {}
 4 | 
 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => SerializationFormat,
 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => »int«,
 9 |   ?'expire_after' => int,
10 |   ?'region' => string,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,
13 |   ?'retry_attempt' => int,
14 |   ?'earlyreturn' => int,
15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
16 |   ?'resource_requirement' => int,
17 |   ?'execution_push_phase' => string,
18 |   ?'async_bulkapi_factor' => float,
19 |   ?'devserver' => string,
20 |   ?'fifo_ordering_key' => string,
21 |   ?'fifo_dedup_key' => string,
22 |   ?'send_schedule_cats' => bool,
23 | );
24 | 
25 | 
26 | enum AsyncTierJobOption: string as string {

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field execution_push_phase is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field execution_push_phase is defined

File workplace_shape_mismatch.php, line 17, character 4 - line 17, character 25:

 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?»'execution_push_phase'« => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the execution_push_phase field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 17, character 30 - line 17, character 35:

 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => »string«,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field expire_after is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field expire_after is defined

File workplace_shape_mismatch.php, line 9, character 4 - line 9, character 17:

 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => int,
 9 |   ?»'expire_after'« => int,
10 |   ?'region' => string,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the expire_after field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 9, character 22 - line 9, character 24:

 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => »int«,
10 |   ?'region' => string,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field fifo_dedup_key is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field fifo_dedup_key is defined

File workplace_shape_mismatch.php, line 21, character 4 - line 21, character 19:

 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?»'fifo_dedup_key'« => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the fifo_dedup_key field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 21, character 24 - line 21, character 29:

 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => »string«,
 22 |   ?'send_schedule_cats' => bool,
 23 | );

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field fifo_ordering_key is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field fifo_ordering_key is defined

File workplace_shape_mismatch.php, line 20, character 4 - line 20, character 22:

 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?»'fifo_ordering_key'« => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the fifo_ordering_key field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 20, character 27 - line 20, character 32:

 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => »string«,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field region is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field region is defined

File workplace_shape_mismatch.php, line 10, character 4 - line 10, character 11:

 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => int,
10 |   ?»'region'« => string,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,
13 |   ?'retry_attempt' => int,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the region field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 10, character 16 - line 10, character 21:

 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => int,
10 |   ?'region' => »string«,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,
13 |   ?'retry_attempt' => int,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field resource_requirement is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field resource_requirement is defined

File workplace_shape_mismatch.php, line 16, character 4 - line 16, character 25:

 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?»'resource_requirement'« => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the resource_requirement field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 16, character 30 - line 16, character 32:

 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => »int«,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field retry_attempt is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field retry_attempt is defined

File workplace_shape_mismatch.php, line 13, character 4 - line 13, character 18:

 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?»'retry_attempt'« => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the retry_attempt field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 13, character 23 - line 13, character 25:

 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => »int«,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field scheduling_uid is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field scheduling_uid is defined

File workplace_shape_mismatch.php, line 11, character 4 - line 11, character 19:

  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?»'scheduling_uid'« => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the scheduling_uid field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 11, character 24 - line 11, character 26:

  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => »int«,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field send_schedule_cats is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field send_schedule_cats is defined

File workplace_shape_mismatch.php, line 22, character 4 - line 22, character 23:

 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?»'send_schedule_cats'« => bool,
 23 | );
 24 | 

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the send_schedule_cats field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 22, character 28 - line 22, character 31:

 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => »bool«,
 23 | );
 24 | 

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field serialization_format is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field serialization_format is defined

File workplace_shape_mismatch.php, line 6, character 4 - line 6, character 25:

 3 | class SerializationFormat {}
 4 | 
 5 | type AsyncJobOptions = shape(
 6 |   ?»'serialization_format'« => SerializationFormat,
 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => int,
10 |   ?'region' => string,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,
13 |   ?'retry_attempt' => int,
14 |   ?'earlyreturn' => int,
15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
16 |   ?'resource_requirement' => int,
17 |   ?'execution_push_phase' => string,
18 |   ?'async_bulkapi_factor' => float,
19 |   ?'devserver' => string,
20 |   ?'fifo_ordering_key' => string,
21 |   ?'fifo_dedup_key' => string,
22 |   ?'send_schedule_cats' => bool,
23 | );
24 | 
25 | 
26 | enum AsyncTierJobOption: string as string {

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the serialization_format field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 6, character 30 - line 6, character 48:

 3 | class SerializationFormat {}
 4 | 
 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => »SerializationFormat«,
 7 |   ?'execute_after' => int,
 8 |   ?'execute_before' => int,
 9 |   ?'expire_after' => int,
10 |   ?'region' => string,
11 |   ?'scheduling_uid' => int,
12 |   ?'tag' => string,
13 |   ?'retry_attempt' => int,
14 |   ?'earlyreturn' => int,
15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
16 |   ?'resource_requirement' => int,
17 |   ?'execution_push_phase' => string,
18 |   ?'async_bulkapi_factor' => float,
19 |   ?'devserver' => string,
20 |   ?'fifo_ordering_key' => string,
21 |   ?'fifo_dedup_key' => string,
22 |   ?'send_schedule_cats' => bool,
23 | );
24 | 
25 | 
26 | enum AsyncTierJobOption: string as string {

which is defined here

File workplace_shape_mismatch.php, line 3, character 7 - line 3, character 25:

 1 | <?hh
 2 | 
 3 | class »SerializationFormat« {}
 4 | 
 5 | type AsyncJobOptions = shape(
 6 |   ?'serialization_format' => SerializationFormat,

The supertype didn't exist because the field was missing.
error: Typing[4057] Invalid argument

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

The field tag is missing

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The field tag is defined

File workplace_shape_mismatch.php, line 12, character 4 - line 12, character 8:

 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?»'tag'« => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,

Here's why:


  Step 1 of 4                                                                   

I started by checking this subtype relationship.

The subtype comes from this function or method declaration

File workplace_shape_mismatch.php, line 88, character 32 - line 88, character 42:

 87 | class Stuff {
 88 |   public static async function »genAsyncJob«(
 89 |     ?AsyncTierJobOptions $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

The supertype comes from this expression

File workplace_shape_mismatch.php, line 97, character 18 - line 97, character 44:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await »self::genAsyncJob($options)«;
 98 |   }
 99 | }


  Step 2 of 4                                                                   

These are function types so next I checked the 1st function parameters.
Functions are contravariant in their parameters so the direction of the subtype relationship is reversed.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

which is defined here

File workplace_shape_mismatch.php, line 5, character 24 - line 23, character 1:

  3 | class SerializationFormat {}
  4 | 
  5 | type AsyncJobOptions = »shape(
  6 |   ?'serialization_format' => SerializationFormat,
  7 |   ?'execute_after' => int,
  8 |   ?'execute_before' => int,
  9 |   ?'expire_after' => int,
 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => string,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,
 16 |   ?'resource_requirement' => int,
 17 |   ?'execution_push_phase' => string,
 18 |   ?'async_bulkapi_factor' => float,
 19 |   ?'devserver' => string,
 20 |   ?'fifo_ordering_key' => string,
 21 |   ?'fifo_dedup_key' => string,
 22 |   ?'send_schedule_cats' => bool,
 23 | );«
 24 | 
 25 | 
 26 | enum AsyncTierJobOption: string as string {

and flows into this expression

File workplace_shape_mismatch.php, line 95, character 21 - line 95, character 28:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions »$options« = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

as the parameter hint

which itself flows into this expression

File workplace_shape_mismatch.php, line 97, character 36 - line 97, character 43:

 94 |   public static final async function genScheduleTestable(
 95 |     AsyncJobOptions $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob(»$options«);
 98 |   }
 99 | }

as the type of the local variable

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 5 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     »?AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }


  Step 3 of 4                                                                   

The supertype is a nullable type so next I checked the subtype constraint is satisfied for either the null or non-null part.

The subtype is the same as before.

File workplace_shape_mismatch.php, line 95, character 5 - line 95, character 19:

 94 |   public static final async function genScheduleTestable(
 95 |     »AsyncJobOptions« $options = shape(),
 96 |   ): Awaitable<string> {
 97 |     return await self::genAsyncJob($options);
 98 |   }
 99 | }

The supertype comes from this hint

File workplace_shape_mismatch.php, line 89, character 6 - line 89, character 24:

 87 | class Stuff {
 88 |   public static async function genAsyncJob(
 89 |     ?»AsyncTierJobOptions« $options = null,
 90 |   ): Awaitable<string> {
 91 |     return "";
 92 |   }

which is defined here

File workplace_shape_mismatch.php, line 74, character 28 - line 84, character 1:

 72 | interface IPFOverrideParams {}
 73 | 
 74 | type AsyncTierJobOptions = »shape(
 75 |   ?AsyncTierJobOption::EXECUTION_DELAY_SECONDS => int,
 76 |   ?AsyncTierJobOption::TTL_SECONDS => int,
 77 |   ?AsyncTierJobOption::REGION_PREFERENCE => string,
 78 |   ?AsyncTierJobOption::SANDBOX_HOST => string,
 79 |   ?AsyncTierJobOption::EARLY_RETURN => int,
 80 |   ?AsyncTierJobOption::SEND_SCHEDULE_CATS => bool,
 81 |   ?AsyncTierJobOption::IPF_PRODUCT_OVERRIDE => IPFOverrideParams,
 82 |   ?AsyncTierJobOption::RETRY_ATTEMPT_DEPRECATED => int,
 83 |   ?AsyncTierJobOption::FIFO_ORDERING_KEY => string,
 84 | );«
 85 | 
 86 | 
 87 | class Stuff {


  Step 4 of 4                                 (here is where the error occurred) 

These are shape types so next I tried to check the tag field.
The field is optional in the subtype but missing in the supertype.

The subtype comes from this hint

File workplace_shape_mismatch.php, line 12, character 13 - line 12, character 18:

 10 |   ?'region' => string,
 11 |   ?'scheduling_uid' => int,
 12 |   ?'tag' => »string«,
 13 |   ?'retry_attempt' => int,
 14 |   ?'earlyreturn' => int,
 15 |   ?'_PIRANHA_SANDBOX_QUEUED_' => bool,

The supertype didn't exist because the field was missing.
17 errors found
